<!DOCTYPE html>
<html>
<!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <head>
    <title>MvpApp</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <!-- Turbo完全オフ（ログアウト・削除のため） -->
  <body data-turbo="false">

    <!-- ▼▼ ハンバーガーメニュー付きナビバー ▼▼ -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">さぼログ</a>

        <!-- ハンバーガーボタン -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- メニュー中身 -->
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">

            <% if user_signed_in? %>
              <!-- ▼ ログインしている場合 ▼ -->
              <li class="nav-item">
                <span class="nav-link">
                  <strong><%= current_user.nickname %></strong> さん
                </span>
              </li>

              <li class="nav-item">
                <%= link_to "投稿一覧", posts_path, class: "nav-link" %>
              </li>

              <li class="nav-item">
                <%= link_to "マイページ", mypage_posts_path, class: "nav-link" %>
              </li>

              <li class="nav-item">
                <%= link_to "プロフィール編集", edit_user_registration_path, class: "nav-link" %>
              </li>

              <li class="nav-item">
                <%= link_to "ログアウト",
                    destroy_user_session_path,
                    data: { turbo: false },
                    class: "nav-link" %>
              </li>

            <% else %>
              <!-- ▼ ログインしていない場合 ▼ -->
              <li class="nav-item">
                <%= link_to "投稿一覧", posts_path, class: "nav-link" %>
              </li>

              <li class="nav-item">
                <%= link_to "新規登録", new_user_registration_path, class: "nav-link" %>
              </li>

              <li class="nav-item">
                <%= link_to "ログイン", new_user_session_path, class: "nav-link" %>
              </li>

            <% end %>

          </ul>
        </div>
      </div>
    </nav>
    <!-- ▲▲ ハンバーガーメニュー付きナビバー ▲▲ -->

    <%= yield %>

    <!-- ▼▼ フッター ▼▼ -->
    <footer class="text-center mt-5 mb-4">
      <%= link_to "利用規約", terms_path, class: "text-secondary me-3" %>
      <%= link_to "プライバシーポリシー", privacy_path, class: "text-secondary" %>
    </footer>
    <!-- ▲▲ フッター ▲▲ -->

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>