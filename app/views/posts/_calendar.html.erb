<h3 class="calendar-title text-center mb-3">
  <%= @date.strftime("%Y年 %m月") %>
</h3>

<div class="d-flex justify-content-between mb-3">
  <%= link_to "〈 前の月",
              mypage_posts_path(
                month: (@date - 1.month).to_s,
                anchor: "calendar-section"
              ),
              class: "btn app-action-btn secondary btn-sm",
              data: { turbo: false } %>

  <%= link_to "次の月 〉",
              mypage_posts_path(
                month: (@date + 1.month).to_s,
                anchor: "calendar-section"
              ),
              class: "btn app-action-btn secondary btn-sm",
              data: { turbo: false } %>
</div>

<table class="calendar-table">
  <thead>
    <tr>
      <% %w(日 月 火 水 木 金 土).each do |day| %>
        <th><%= day %></th>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% calendar(@date, @calendar_posts).each do |week| %>
      <tr>
        <% week.each do |day| %>
          <% classes = [] %>
          <% classes << "other-month" if day.month != @date.month %>

          <td class="<%= classes.join(" ") %>">
            <div class="day-number"><%= day.day %></div>

            <% if @calendar_posts.any? { |p| p.created_at.to_date == day } %>
              <%= image_tag "kareha.PNG", class: "calendar-stamp" %>
            <% end %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>