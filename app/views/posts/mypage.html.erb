<div class="container mt-5">
  <h1>マイページ</h1>
  <p class="text-muted">あなたが投稿した記録です</p>

  <hr>

  <% if @posts.any? %>
    <% @posts.each do |post| %>
      <div class="card mb-3">
        <div class="card-body">

          <h3><%= link_to post.title, post_path(post) %></h3>
          <p class="text-muted">ジャンル：<%= post.category %></p>
          <p><%= truncate(post.content, length: 100) %></p>
          <p class="text-muted small"><%= l post.created_at, format: :long %></p>

          <!-- ▼ マイページ用スタンプ表示 -->
          <% post.stamps.each do |stamp| %>
            <% next if stamp.user == current_user %>

            <%= image_tag "emoji_#{stamp.stamp_type}.PNG",
                          size: "36x36",
                          class: "stamp-current",
                          data: {
                            controller: "popover",
                            bs_toggle: "popover",
                            bs_content: "#{stamp.user.nickname} さんが押しました"
                          } %>
          <% end %>

        </div>
      </div>
    <% end %>
  <% else %>
    <p>まだ投稿がありません。</p>
  <% end %>

  <%= link_to "新規投稿", new_post_path, class: "btn btn-success mt-3" %>
</div>